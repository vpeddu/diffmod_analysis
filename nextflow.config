if (params.PHOENIX) { 
  process.executor = 'slurm'
    queueSize = 32
    withName: 'Basecall'{ 
        cpus = 16
        memory = 64.GB
        time = '2h'
        //clusterOptions = '--nodelist=phoenix[00-05]'
    }
  singularity { 
    enabled = true
    runOptions = "--bind $PWD"

  }
process {
  withLabel: with_cpus {
      println('running guppy with CPU')
        cpus = 1
        memory = '7G'
  }
  withLabel: with_gpus {
      println('running guppy with GPU')
      maxForks = 1
      containerOptions = { workflow.containerEngine == "singularity" ? '--nv':
      ( workflow.containerEngine == "docker" ? '--gpus all': null ) }
  } 
}

} else { 
process {
  withLabel: with_cpus {
        cpus = 1
        memory = '7G'
  }
  withLabel: with_gpus {
      maxForks = 1
      containerOptions = { workflow.containerEngine == "singularity" ? '--nv':
      ( workflow.containerEngine == "docker" ? '--gpus all': null ) }
  } 
}

  singularity {
    //enabled = true
    runOptions = '--nv'
    singularity.autoMounts = true
  }
}